
<!-- HTML validation failed: Unbalanced p tags -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   API Documentation • Developer Portal
  </title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
  <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" rel="stylesheet"/>
  <link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" referrerpolicy="no-referrer" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" rel="stylesheet">
   <link href="style.css" rel="stylesheet"/>
   <link href="api_documentation.css" rel="stylesheet"/>
  </link>
 </head>
 <body>
  <!-- Header (needed on docs page) -->
  <nav class="navbar navbar-expand-lg navbar-dark sticky-top" style="background:#0000FF;">
   <div class="container-fluid">
    <button aria-controls="appSidebarPartner" class="btn btn-outline-light me-2 d-lg-none" data-bs-target="#appSidebarPartner" data-bs-toggle="offcanvas" type="button">
     <i class="fas fa-bars">
     </i>
    </button>
    <a class="navbar-brand d-flex align-items-center" href="./developer_portal.html">
     <img alt="Logo" class="me-2" onerror="this.onerror=null;this.src='https://picsum.photos/seed/brand/28/28';" src="https://share.google/images/IG0HtHavlhtuhg52t" style="width:28px;height:28px;object-fit:contain;"/>
     Developer Portal
    </a>
    <form class="d-none d-md-flex ms-3 w-50" role="search">
     <div class="input-group">
      <span class="input-group-text bg-white">
       <i class="fas fa-search">
       </i>
      </span>
      <input aria-label="Search" class="form-control" id="globalDocsSearch" placeholder="Search docs, endpoints, guides..." type="search"/>
     </div>
    </form>
    <ul class="navbar-nav ms-auto align-items-center">
     <li class="nav-item me-2">
      <a class="nav-link" href="#" id="btnNotifications">
       <i class="fas fa-bell">
       </i>
      </a>
     </li>
     <li class="nav-item dropdown">
      <a aria-expanded="false" class="nav-link dropdown-toggle d-flex align-items-center" data-bs-toggle="dropdown" href="#" role="button">
       <span class="me-2">
        Partner
       </span>
       <img alt="avatar" class="rounded-circle" src="https://picsum.photos/seed/user/28/28"/>
      </a>
      <ul class="dropdown-menu dropdown-menu-end">
       <li>
        <a class="dropdown-item" href="./partner_dashboard.html">
         <i class="fas fa-gauge me-2">
         </i>
         My Dashboard
        </a>
       </li>
       <li>
        <a class="dropdown-item" href="./partner_dashboard.html#api-keys">
         <i class="fas fa-key me-2">
         </i>
         API Keys
        </a>
       </li>
       <li>
        <hr class="dropdown-divider"/>
       </li>
       <li>
        <a class="dropdown-item" href="#" id="btnLogout">
         <i class="fas fa-sign-out-alt me-2">
         </i>
         Logout
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </div>
  </nav>
  <!-- Partner Portal Sidebar (needed on docs page) -->
  <aside aria-labelledby="appSidebarPartnerLabel" class="offcanvas-lg offcanvas-start d-flex flex-column flex-shrink-0 p-3 bg-dark text-white" data-bs-backdrop="false" data-bs-scroll="true" id="appSidebarPartner" style="width:260px;min-height:100vh;background-color:#000000 !important;" tabindex="-1">
   <div class="offcanvas-header d-lg-none">
    <h5 class="offcanvas-title" id="appSidebarPartnerLabel">
     Developer Portal
    </h5>
    <button aria-label="Close" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" data-bs-target="#appSidebarPartner" type="button">
    </button>
   </div>
   <div class="offcanvas-body p-0 d-flex flex-column">
    <div class="d-flex align-items-center mb-3 px-3 pt-3">
     <a class="text-white text-decoration-none d-flex align-items-center" href="./developer_portal.html">
      <img alt="Logo" class="me-2" onerror="this.onerror=null;this.src='https://picsum.photos/seed/brand/32/32';" src="https://share.google/images/IG0HtHavlhtuhg52t" style="width:32px;height:32px;object-fit:contain;"/>
      <span class="fs-5 fw-bold">
       Developer Portal
      </span>
     </a>
    </div>
    <div class="d-flex align-items-center mb-4 p-2 rounded mx-3" style="background:rgba(255,255,255,0.05);">
     <div class="me-2 rounded-circle bg-secondary d-flex align-items-center justify-content-center" style="width:40px;height:40px;background:#2d2d2d;">
      P
     </div>
     <div>
      <div class="fw-semibold">
       Partner Co.
      </div>
      <small class="text-muted">
       API Partner
      </small>
     </div>
    </div>
    <ul class="nav nav-pills flex-column mb-auto px-3">
     <li class="nav-item">
      <a class="nav-link text-white" href="./developer_portal.html" style="border-radius:8px;">
       <i class="fas fa-plug me-2">
       </i>
       Portal Home
      </a>
     </li>
     <li>
      <a class="nav-link text-white active" href="./api_documentation.html" style="border-radius:8px;">
       <i class="fas fa-book me-2">
       </i>
       API Documentation
      </a>
     </li>
     <li>
      <a class="nav-link text-white" href="./partner_dashboard.html" style="border-radius:8px;">
       <i class="fas fa-gauge me-2">
       </i>
       My Dashboard
      </a>
     </li>
     <li>
      <a aria-controls="devTools" aria-expanded="false" class="nav-link text-white d-flex align-items-center" data-bs-toggle="collapse" href="#devTools" role="button" style="border-radius:8px;">
       <i class="fas fa-toolbox me-2">
       </i>
       Developer Tools
       <i class="fas fa-chevron-down ms-auto">
       </i>
      </a>
      <div class="collapse" id="devTools">
       <ul class="list-unstyled fw-normal small ps-4">
        <li>
         <a class="nav-link text-white-50 d-block py-1" href="./partner_dashboard.html#api-keys">
          <i class="fas fa-key me-2">
          </i>
          API Keys
         </a>
        </li>
        <li>
         <a class="nav-link text-white-50 d-block py-1" href="./partner_dashboard.html#usage">
          <i class="fas fa-chart-area me-2">
          </i>
          Usage Analytics
         </a>
        </li>
        <li>
         <a class="nav-link text-white-50 d-block py-1" href="./developer_portal.html#support">
          <i class="fas fa-life-ring me-2">
          </i>
          Support
         </a>
        </li>
       </ul>
      </div>
     </li>
    </ul>
    <hr class="text-secondary mx-3"/>
    <small class="text-secondary px-3 pb-3">
     © Fraud Shield
    </small>
    <style>
     #appSidebarPartner .nav-link:hover{background:rgba(255,255,255,0.08);} 
        #appSidebarPartner .nav-link.active{background:rgba(0,0,255,0.15);border-left:3px solid #0000FF;color:#fff;}
    </style>
   </div>
  </aside>
  <!-- Page content wrapper (shifts when sidebar visible on lg+) -->
  <main class="content-wrap">
   <div class="container-fluid py-3">
    <!-- System feedback / notification area -->
    <div class="alert alert-info d-flex align-items-center" role="alert">
     <i class="fa-solid fa-info-circle me-2">
     </i>
     <div>
      Docs update (v1.3): Added /transactions/score and expanded error code coverage. See
      <a class="alert-link" href="#changelog">
       changelog
      </a>
      .
     </div>
     <button aria-label="Close" class="btn-close ms-auto" data-bs-dismiss="alert" type="button">
     </button>
    </div>
    <!-- Page header -->
    <div class="page-header">
     <div class="d-flex align-items-center gap-3">
      <h1 class="page-title m-0">
       API Documentation
      </h1>
      <span class="badge-soft info">
       Stable • v1.3
      </span>
     </div>
     <div class="d-flex align-items-center gap-2">
      <div class="dropdown">
       <button aria-expanded="false" class="btn btn-light dropdown-toggle" data-bs-toggle="dropdown" type="button">
        <i class="fa-solid fa-code-branch me-1">
        </i>
        Version
       </button>
       <ul class="dropdown-menu dropdown-menu-end">
        <li>
         <a class="dropdown-item" href="#">
          v1.3 (Latest)
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="#">
          v1.2
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="#">
          v1.1
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="#">
          v1.0
         </a>
        </li>
       </ul>
      </div>
      <button class="btn btn-info" id="btnReportIssue">
       <i class="fa-regular fa-flag me-1">
       </i>
       Report issue
      </button>
     </div>
    </div>
    <div class="row g-4">
     <!-- Documentation Sidebar (TOC) -->
     <div class="col-lg-3">
      <div class="card docs-sidenav">
       <div class="card-header">
        <strong>
         Table of Contents
        </strong>
       </div>
       <div class="card-body p-0">
        <nav class="list-group list-group-flush" id="docsToc">
         <a class="list-group-item list-group-item-action toc-link active" href="#introduction">
          Introduction
         </a>
         <a class="list-group-item list-group-item-action toc-link" href="#authentication">
          Authentication
         </a>
         <a class="list-group-item list-group-item-action toc-link" href="#rate-limiting">
          Rate Limiting
         </a>
         <a class="list-group-item list-group-item-action toc-link" href="#endpoints">
          Endpoints
         </a>
         <a class="list-group-item list-group-item-action toc-link" href="#error-codes">
          Error Codes
         </a>
         <a class="list-group-item list-group-item-action toc-link" href="#data-models">
          Data Models
         </a>
         <a class="list-group-item list-group-item-action toc-link" href="#usage-policies">
          Usage Policies
         </a>
         <a class="list-group-item list-group-item-action toc-link" href="#changelog">
          Changelog
         </a>
        </nav>
       </div>
      </div>
     </div>
     <!-- Main Content -->
     <div class="col-lg-9">
      <!-- Introduction -->
      <section class="doc-section" id="introduction">
       <h2>
        Introduction
       </h2>
       <p>
        Welcome to the Fraud Shield API. Use these endpoints to assess fraud risk on accounts, phone numbers, emails, and transactions in real time. Each section below includes details on authentication, rate limits, error codes, and example requests/responses.
       </p>
       <div class="alert alert-warning" role="alert">
        <i class="fa-solid fa-triangle-exclamation me-2">
        </i>
        Sandbox keys are for test use only. Production keys require approved onboarding and KYC.
       </div>
      </section>
      <!-- Authentication -->
      <section class="doc-section" id="authentication">
       <h2>
        Authentication
       </h2>
       <p>
        Authenticate requests using a Bearer token in the Authorization header. Create and manage keys in your
        <a href="./partner_dashboard.html#api-keys">
         Partner Dashboard
        </a>
        .
       </p>
       <div class="card mb-3">
        <div class="card-header d-flex justify-content-between align-items-center">
         <span class="widget-title">
          HTTP Header
         </span>
         <button class="btn btn-sm btn-outline-primary btn-copy" data-copy-target="#authHeaderCode">
          <i class="fa-regular fa-clipboard me-1">
          </i>
          Copy
         </button>
        </div>
        <div class="card-body">
         <pre class="language-http"><code id="authHeaderCode">Authorization: Bearer &lt;YOUR_API_KEY&gt;</code></pre>
        </div>
       </div>
       <button class="btn btn-success" id="btnCopyToken">
        <i class="fa-solid fa-key me-1">
        </i>
        Copy sample token
       </button>
      </section>
      <!-- Rate Limiting -->
      <section class="doc-section" id="rate-limiting">
       <h2>
        Rate Limiting
       </h2>
       <p>
        Default limits: 120 requests/minute per API key. Bursting is supported up to 2x for 10 seconds. Contact support to adjust quotas.
       </p>
       <div class="card">
        <div class="card-header">
         <span class="widget-title">
          <i class="fa-solid fa-chart-line me-2">
          </i>
          Requests per minute (demo)
         </span>
        </div>
        <div class="card-body">
         <div class="skeleton mb-2" id="chartSkeleton" style="height:8px;width:100%;">
         </div>
         <canvas aria-label="Rate limit chart" height="110" id="rateChart" role="img">
         </canvas>
        </div>
        <div class="card-footer small text-muted">
         Hover for details. Data is mock for demonstration.
        </div>
       </div>
      </section>
      <!-- Endpoints -->
      <section class="doc-section" id="endpoints">
       <h2>
        Endpoints
       </h2>
       <!-- Endpoint Detail: POST /api/v1/score -->
       <article class="app-card mb-4">
        <div class="card-header">
         <div class="d-flex align-items-center gap-2">
          <span class="badge bg-dark me-2">
           POST
          </span>
          <h3 class="m-0">
           /api/v1/score
          </h3>
         </div>
         <div class="d-flex align-items-center gap-2">
          <span class="badge-soft primary">
           JSON
          </span>
          <span class="badge-soft info">
           v1
          </span>
         </div>
        </div>
        <div class="card-body">
         <p>
          Scores a transaction payload and returns a fraud risk assessment.
         </p>
         <h4 class="mt-3">
          Request
         </h4>
         <div class="mb-2 small text-muted">
          Content-Type: application/json
         </div>
         <div class="position-relative mb-3">
          <button class="btn btn-sm btn-outline-primary position-absolute top-0 end-0 m-2 btn-copy" data-copy-target="#reqScoreCode">
           <i class="fa-regular fa-clipboard me-1">
           </i>
           Copy
          </button>
          <pre class="language-javascript"><code id="reqScoreCode">fetch('https://api.fraudshield.com/api/v1/score', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer &lt;YOUR_API_KEY&gt;',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    transaction_id: 'txn_9845231',
    amount: 129.99,
    currency: 'USD',
    payment_method: {
      type: 'card',
      last4: '4242'
    },
    customer: {
      email: 'jane.doe@example.com',
      phone: '+14155550123',
      ip: '203.0.113.42'
    }
  })
});</code></pre>
         </div>
         <h4>
          Response Fields
         </h4>
         <div class="d-flex flex-wrap align-items-center gap-2 mb-2">
          <div class="input-group" style="max-width:360px;">
           <span class="input-group-text">
            <i class="fa-solid fa-filter">
            </i>
           </span>
           <input class="form-control" id="fieldsFilter" placeholder="Filter fields by name or description..." type="text">
           </input>
          </div>
          <div class="ms-auto small text-muted" id="fieldsMeta">
           Showing 8 fields
          </div>
         </div>
         <div class="table-responsive">
          <table class="table table-theme align-middle" id="fieldsTable">
           <thead>
            <tr>
             <th data-sort="name" role="button">
              Field
              <i class="fa-solid fa-sort ms-1">
              </i>
             </th>
             <th data-sort="type" role="button">
              Type
              <i class="fa-solid fa-sort ms-1">
              </i>
             </th>
             <th>
              Description
             </th>
            </tr>
           </thead>
           <tbody>
            <tr>
             <td>
              transaction_id
             </td>
             <td>
              string
             </td>
             <td>
              Echoed transaction identifier.
             </td>
            </tr>
            <tr>
             <td>
              risk_score
             </td>
             <td>
              number
             </td>
             <td>
              0-100 score (higher = higher risk).
             </td>
            </tr>
            <tr>
             <td>
              risk_label
             </td>
             <td>
              string
             </td>
             <td>
              Human-friendly label such as Low, Medium, High.
             </td>
            </tr>
            <tr>
             <td>
              reason_codes
             </td>
             <td>
              string[]
             </td>
             <td>
              List of triggered rules (e.g., email_disposable).
             </td>
            </tr>
            <tr>
             <td>
              recommendation
             </td>
             <td>
              string
             </td>
             <td>
              Suggested action: allow, challenge, or block.
             </td>
            </tr>
            <tr>
             <td>
              device_trust
             </td>
             <td>
              number
             </td>
             <td>
              0-100 trust score derived from device signals.
             </td>
            </tr>
            <tr>
             <td>
              geo_risk
             </td>
             <td>
              number
             </td>
             <td>
              0-100 risk from geolocation and IP reputation.
             </td>
            </tr>
            <tr>
             <td>
              processed_at
             </td>
             <td>
              string (ISO)
             </td>
             <td>
              Timestamp when the decision was produced.
             </td>
            </tr>
           </tbody>
          </table>
         </div>
         <h4 class="mt-4">
          Response Example
         </h4>
         <div class="position-relative">
          <button class="btn btn-sm btn-outline-primary position-absolute top-0 end-0 m-2 btn-copy" data-copy-target="#respScoreCode">
           <i class="fa-regular fa-clipboard me-1">
           </i>
           Copy
          </button>
          <pre class="language-json"><code id="respScoreCode">{
  "transaction_id": "txn_9845231",
  "risk_score": 72.4,
  "risk_label": "High",
  "reason_codes": ["ip_high_risk_country", "email_disposable"],
  "recommendation": "challenge",
  "device_trust": 34,
  "geo_risk": 81,
  "processed_at": "2026-05-15T12:44:19Z"
}</code></pre>
         </div>
        </div>
       </article>
       <!-- Endpoint Detail: GET /api/v1/lookup/{phone} -->
       <article class="app-card mb-4">
        <div class="card-header">
         <div class="d-flex align-items-center gap-2">
          <span class="badge bg-success me-2">
           GET
          </span>
          <h3 class="m-0">
           /api/v1/lookup/{phone}
          </h3>
         </div>
         <div class="d-flex align-items-center gap-2">
          <span class="badge-soft primary">
           JSON
          </span>
          <span class="badge-soft info">
           v1
          </span>
         </div>
        </div>
        <div class="card-body">
         <p>
          Returns reputation details for a phone number.
         </p>
         <h4 class="mt-3">
          Request
         </h4>
         <div class="position-relative mb-3">
          <button class="btn btn-sm btn-outline-primary position-absolute top-0 end-0 m-2 btn-copy" data-copy-target="#reqPhoneCode">
           <i class="fa-regular fa-clipboard me-1">
           </i>
           Copy
          </button>
          <pre class="language-bash"><code id="reqPhoneCode">curl -X GET \
  'https://api.fraudshield.com/api/v1/lookup/%2B14155550123' \
  -H 'Authorization: Bearer &lt;YOUR_API_KEY&gt;'</code></pre>
         </div>
         <h4>
          Response Example
         </h4>
         <div class="position-relative">
          <button class="btn btn-sm btn-outline-primary position-absolute top-0 end-0 m-2 btn-copy" data-copy-target="#respPhoneCode">
           <i class="fa-regular fa-clipboard me-1">
           </i>
           Copy
          </button>
          <pre class="language-json"><code id="respPhoneCode">{
  "phone": "+14155550123",
  "risk_score": 12,
  "risk_label": "Low",
  "carrier": "Verizon",
  "country": "US",
  "blocked": false,
  "discovered_at": "2026-01-09T08:21:00Z"
}</code></pre>
         </div>
        </div>
       </article>
      </section>
      <!-- Error Codes -->
      <section class="doc-section" id="error-codes">
       <h2>
        Error Codes
       </h2>
       <p>
        All error responses include a standardized structure with a machine-readable code and human-readable message.
       </p>
       <div class="d-flex flex-wrap align-items-center gap-2 mb-2">
        <div class="input-group" style="max-width:360px;">
         <span class="input-group-text">
          <i class="fa-solid fa-magnifying-glass">
          </i>
         </span>
         <input class="form-control" id="errorFilter" placeholder="Filter by code, status, description..." type="text"/>
        </div>
        <div class="dropdown ms-auto">
         <button aria-expanded="false" class="btn btn-light dropdown-toggle" data-bs-toggle="dropdown" type="button">
          <i class="fa-solid fa-arrow-up-short-wide me-1">
          </i>
          Sort
         </button>
         <ul class="dropdown-menu dropdown-menu-end">
          <li>
           <a class="dropdown-item error-sort" data-sort="code" href="#">
            Code
           </a>
          </li>
          <li>
           <a class="dropdown-item error-sort" data-sort="status" href="#">
            HTTP Status
           </a>
          </li>
          <li>
           <a class="dropdown-item error-sort" data-sort="retryable" href="#">
            Retryable
           </a>
          </li>
         </ul>
        </div>
       </div>
       <div class="table-responsive">
        <table class="table table-theme" id="errorsTable">
         <thead>
          <tr>
           <th>
            Code
           </th>
           <th>
            HTTP Status
           </th>
           <th>
            Description
           </th>
           <th>
            Retryable
           </th>
           <th>
            Action
           </th>
          </tr>
         </thead>
         <tbody>
          <!-- populated by JS -->
         </tbody>
        </table>
       </div>
       <div class="d-flex align-items-center justify-content-between mt-2">
        <div class="small text-muted" id="errorsMeta">
         Showing 0 of 0
        </div>
        <nav aria-label="Error pagination">
         <ul class="pagination pagination-sm mb-0" id="errorsPager">
          <!-- populated by JS -->
         </ul>
        </nav>
       </div>
      </section>
      <!-- Data Models -->
      <section class="doc-section" id="data-models">
       <h2>
        Data Models
       </h2>
       <p>
        Core entities returned by the API:
       </p>
       <ul>
        <li>
         <strong>
          RiskDecision
         </strong>
         : risk_score (number), risk_label (string), recommendation (string), reason_codes (string[])
        </li>
        <li>
         <strong>
          PhoneReputation
         </strong>
         : phone (string), risk_score (number), carrier (string), country (string), blocked (boolean), discovered_at (ISO datetime)
        </li>
        <li>
         <strong>
          ErrorResponse
         </strong>
         : code (string), message (string), request_id (string), docs (string)
        </li>
       </ul>
      </section>
      <!-- Usage Policies -->
      <section class="doc-section" id="usage-policies">
       <h2>
        Usage Policies
       </h2>
       <p>
        Use of the API is governed by our
        <a href="./terms_of_service.html#privacy">
         Terms &amp; Privacy
        </a>
        . You must not store PII beyond stated retention periods and must implement reasonable safeguards for API keys.
       </p>
      </section>
      <!-- Changelog -->
      <section class="doc-section" id="changelog">
       <h2>
        Changelog
       </h2>
       <ul>
        <li>
         <strong>
          v1.3
         </strong>
         : Added transactions/score, improved reason_codes taxonomy, more granular rate limit headers.
        </li>
        <li>
         <strong>
          v1.2
         </strong>
         : Phone lookup enhancements, added device_trust metric.
        </li>
        <li>
         <strong>
          v1.1
         </strong>
         : Error format standardized.
        </li>
        <li>
         <strong>
          v1.0
         </strong>
         : Initial public release.
        </li>
       </ul>
      </section>
      <div class="text-end mt-4">
       <a class="btn btn-light" href="#introduction">
        <i class="fa-solid fa-arrow-up">
        </i>
        Back to top
       </a>
      </div>
     </div>
    </div>
   </div>
   <!-- Footer (needed) -->
   <footer class="py-3" style="background:#000000;color:#fff;">
    <div class="container-fluid d-flex flex-wrap align-items-center justify-content-between">
     <small>
      © 2026 Fraud Shield • Developer Portal
     </small>
     <ul class="nav">
      <li class="nav-item">
       <a class="nav-link px-2 text-white-50" href="./terms_of_service.html">
        Terms
       </a>
      </li>
      <li class="nav-item">
       <a class="nav-link px-2 text-white-50" href="./terms_of_service.html#privacy">
        Privacy
       </a>
      </li>
      <li class="nav-item">
       <a class="nav-link px-2 text-white-50" href="./api_documentation.html">
        <i class="fas fa-book me-1">
        </i>
        Docs
       </a>
      </li>
     </ul>
    </div>
   </footer>
  </main>
  <!-- Scripts -->
  <script crossorigin="anonymous" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-json.min.js">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js">
  </script>
  <script>
   // Brand search: rough filter to scroll to matching section
(function() {
    const search = document.getElementById('globalDocsSearch');
    if (!search) return;
    search.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
            e.preventDefault();
            const q = (search.value || '').toLowerCase().trim();
            if (!q) return;
            const sections = Array.from(document.querySelectorAll('.doc-section'));
            const match = sections.find(sec => (sec.querySelector('h2')?.textContent || '').toLowerCase().includes(q));
            if (match) {
                match.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            } else {
                Swal.fire({
                    icon: 'info',
                    title: 'No section found',
                    text: 'Try searching: authentication, rate limiting, endpoints, error codes',
                    timer: 2500,
                    showConfirmButton: false
                });
            }
        }
    });
})();

// Logout handler
document.getElementById('btnLogout')?.addEventListener('click', (e) => {
    e.preventDefault();
    Swal.fire({
        title: 'Logout?',
        text: 'You will be redirected to the login page.',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Logout',
        cancelButtonText: 'Cancel'
    }).then(res => {
        if (res.isConfirmed) window.location.href = './partner_login.html';
    });
});

// Report issue
document.getElementById('btnReportIssue')?.addEventListener('click', () => {
    Swal.fire({
        title: 'Report an issue',
        input: 'textarea',
        inputLabel: 'Describe the problem',
        inputPlaceholder: 'Endpoint, section, or code sample issue...',
        inputAttributes: {
            'aria-label': 'Issue details'
        },
        showCancelButton: true,
        confirmButtonText: 'Submit',
    }).then(result => {
        if (result.isConfirmed) {
            Swal.fire({
                icon: 'success',
                title: 'Thanks!',
                text: 'We received your report.',
                timer: 2000,
                showConfirmButton: false
            });
        }
    });
});

// Copy to clipboard buttons (generic)
function handleCopy(selector) {
    const el = document.querySelector(selector);
    if (!el) return;
    const text = el.textContent;
    navigator.clipboard.writeText(text).then(() => {
        const Toast = Swal.mixin({
            toast: true,
            position: 'top-end',
            timer: 1500,
            showConfirmButton: false
        });
        Toast.fire({
            icon: 'success',
            title: 'Copied to clipboard'
        });
    }).catch(() => Swal.fire({
        icon: 'error',
        title: 'Copy failed'
    }));
}
document.querySelectorAll('.btn-copy').forEach(btn => {
    btn.addEventListener('click', () => handleCopy(btn.getAttribute('data-copy-target')));
});
document.getElementById('btnCopyToken')?.addEventListener('click', () => {
    navigator.clipboard.writeText('Bearer sk_test_51xYzA...').then(() => {
        const Toast = Swal.mixin({
            toast: true,
            position: 'top-end',
            timer: 1500,
            showConfirmButton: false
        });
        Toast.fire({
            icon: 'success',
            title: 'Sample token copied'
        });
    });
});

// TOC smooth scroll + active link highlight
const tocLinks = Array.from(document.querySelectorAll('#docsToc .toc-link'));
tocLinks.forEach(a => {
    a.addEventListener('click', (e) => {
        e.preventDefault();
        const id = a.getAttribute('href');
        const target = document.querySelector(id);
        if (target) target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });
    });
});
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        const id = '#' + entry.target.id;
        const link = tocLinks.find(l => l.getAttribute('href') === id);
        if (link) {
            if (entry.isIntersecting) {
                tocLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
            }
        }
    });
}, {
    rootMargin: '-30% 0px -60% 0px',
    threshold: 0.1
});
document.querySelectorAll('.doc-section').forEach(sec => observer.observe(sec));

// Response fields: filter + sort
(function() {
    const table = document.getElementById('fieldsTable');
    if (!table) return;
    const tbody = table.querySelector('tbody');
    const rows = Array.from(tbody.querySelectorAll('tr'));
    const filter = document.getElementById('fieldsFilter');
    const meta = document.getElementById('fieldsMeta');
    const render = (list) => {
        tbody.innerHTML = '';
        list.forEach(tr => tbody.appendChild(tr));
        meta.textContent = `Showing ${list.length} fields`;
    };
    let current = rows.slice();
    render(current);
    filter.addEventListener('input', () => {
        const q = filter.value.toLowerCase();
        current = rows.filter(r => r.textContent.toLowerCase().includes(q));
        render(current);
    });
    table.querySelectorAll('th[data-sort]').forEach(th => {
        let asc = true;
        th.addEventListener('click', () => {
            const idx = Array.from(th.parentElement.children).indexOf(th);
            current.sort((a, b) => {
                const va = a.children[idx].textContent.trim().toLowerCase();
                const vb = b.children[idx].textContent.trim().toLowerCase();
                if (va < vb) return asc ? -1 : 1;
                if (va > vb) return asc ? 1 : -1;
                return 0;
            });
            asc = !asc;
            render(current);
        });
    });
})();

// Error codes: mock data, filter, sort, paginate
(function() {
    const data = [{
        code: 'auth_missing',
        status: 401,
        desc: 'Authorization header missing or malformed',
        retryable: false,
        docs: '#authentication'
    }, {
        code: 'auth_invalid',
        status: 401,
        desc: 'API key invalid or revoked',
        retryable: false,
        docs: '#authentication'
    }, {
        code: 'rate_limit_exceeded',
        status: 429,
        desc: 'Too many requests',
        retryable: true,
        docs: '#rate-limiting'
    }, {
        code: 'payload_invalid',
        status: 400,
        desc: 'Request body failed schema validation',
        retryable: false,
        docs: '#endpoints'
    }, {
        code: 'not_found',
        status: 404,
        desc: 'Resource not found',
        retryable: false,
        docs: '#endpoints'
    }, {
        code: 'method_not_allowed',
        status: 405,
        desc: 'HTTP method not allowed',
        retryable: false,
        docs: '#endpoints'
    }, {
        code: 'internal_error',
        status: 500,
        desc: 'Unexpected server error',
        retryable: true,
        docs: '#changelog'
    }, {
        code: 'timeout',
        status: 504,
        desc: 'Upstream timeout',
        retryable: true,
        docs: '#rate-limiting'
    }, {
        code: 'quota_exhausted',
        status: 402,
        desc: 'Account quota exceeded',
        retryable: false,
        docs: '#rate-limiting'
    }, {
        code: 'request_too_large',
        status: 413,
        desc: 'Payload exceeds size limits',
        retryable: false,
        docs: '#endpoints'
    }, {
        code: 'unsupported_media',
        status: 415,
        desc: 'Unsupported Content-Type',
        retryable: false,
        docs: '#endpoints'
    }, {
        code: 'deprecated',
        status: 410,
        desc: 'Endpoint deprecated and removed',
        retryable: false,
        docs: '#changelog'
    }];
    const tbody = document.querySelector('#errorsTable tbody');
    const filter = document.getElementById('errorFilter');
    const meta = document.getElementById('errorsMeta');
    const pager = document.getElementById('errorsPager');
    const sortButtons = document.querySelectorAll('.error-sort');
    const pageSize = 6;
    let page = 1;
    let current = data.slice();
    let sortKey = 'code';
    let asc = true;

    function sortData() {
        current.sort((a, b) => {
            const va = a[sortKey];
            const vb = b[sortKey];
            if (va < vb) return asc ? -1 : 1;
            if (va > vb) return asc ? 1 : -1;
            return 0;
        });
    }

    function render() {
        sortData();
        const total = current.length;
        const pages = Math.max(1, Math.ceil(total / pageSize));
        if (page > pages) page = pages;
        const start = (page - 1) * pageSize;
        const slice = current.slice(start, start + pageSize);
        tbody.innerHTML = '';
        slice.forEach(row => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td><code>${row.code}</code></td>
            <td>${row.status}</td>
            <td>${row.desc}</td>
            <td>${row.retryable ? '<span class="badge bg-success">Yes</span>' : '<span class="badge bg-secondary">No</span>'}</td>
            <td><a href="${row.docs}" class="btn btn-sm btn-outline-primary">Docs</a></td>`;
            tbody.appendChild(tr);
        });
        meta.textContent = `Showing ${start + 1}-${Math.min(start + slice.length, total)} of ${total}`;
        // pagination
        pager.innerHTML = '';
        const prevLi = document.createElement('li');
        prevLi.className = 'page-item' + (page === 1 ? ' disabled' : '');
        prevLi.innerHTML = `<a class="page-link" href="#" aria-label="Previous">&laquo;</a>`;
        prevLi.addEventListener('click', (e) => {
            e.preventDefault();
            if (page > 1) {
                page--;
                render();
            }
        });
        pager.appendChild(prevLi);
        for (let i = 1; i <= pages; i++) {
            const li = document.createElement('li');
            li.className = 'page-item' + (i === page ? ' active' : '');
            li.innerHTML = `<a class="page-link" href="#">${i}</a>`;
            li.addEventListener('click', (e) => {
                e.preventDefault();
                page = i;
                render();
            });
            pager.appendChild(li);
        }
        const nextLi = document.createElement('li');
        nextLi.className = 'page-item' + (page === pages ? ' disabled' : '');
        nextLi.innerHTML = `<a class="page-link" href="#" aria-label="Next">&raquo;</a>`;
        nextLi.addEventListener('click', (e) => {
            e.preventDefault();
            if (page < pages) {
                page++;
                render();
            }
        });
        pager.appendChild(nextLi);
    }

    function applyFilter() {
        const q = (filter.value || '').toLowerCase();
        current = data.filter(d => `${d.code} ${d.status} ${d.desc}`.toLowerCase().includes(q));
        page = 1;
        render();
    }
    filter.addEventListener('input', applyFilter);
    sortButtons.forEach(btn => btn.addEventListener('click', (e) => {
        e.preventDefault();
        const key = btn.getAttribute('data-sort');
        if (sortKey === key) asc = !asc;
        else {
            sortKey = key;
            asc = true;
        }
        render();
    }));
    render();
})();

// Chart.js demo
(function() {
    const ctx = document.getElementById('rateChart');
    if (!ctx) return;
    const now = new Date();
    const labels = Array.from({
        length: 30
    }).map((_, i) => {
        const d = new Date(now.getTime() - (29 - i) * 60000);
        return d.getHours().toString().padStart(2, '0') + ':' + d.getMinutes().toString().padStart(2, '0');
    });
    const data = labels.map(() => Math.floor(60 + Math.random() * 80));
    const chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels,
            datasets: [{
                label: 'Requests/min',
                data,
                borderColor: '#0000FF',
                backgroundColor: 'rgba(0,0,255,0.1)',
                tension: 0.3,
                fill: true,
                pointRadius: 0
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true
                }
            },
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    intersect: false,
                    mode: 'index'
                }
            }
        }
    });
    document.getElementById('chartSkeleton')?.remove();
})();
  </script>
 </body>
</html>
